<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="format-detection" content="telephone=no">
    <title>答题工具</title>
    <link rel="stylesheet" href="../layui/css/layui.css" media="all"/>
    <link rel="stylesheet" href="../formSelectV4/formSelects-v4.css" media="all"/>
    <link rel="stylesheet" href="../css/global.css" media="all"/>
    <link rel="stylesheet" href="../css/font-awesome/css/font-awesome.css" media="all"/>
    <style type="text/css">
        .bg {
            position: absolute;
            height: auto;
            width: 100%;
            opacity: 0.8;
            z-index: -1;
        }

        .single_sub, .multiple_sub {
            padding-left: 8px;
            padding-top: 18px;
        }

        .sing_sub_opt, .multiple_sub_opt {
            padding-left: 11px;
        }

        .shared_question {
            padding-bottom: 10px;
        }

        #back_btn {
            position: relative;
            float: right;
            margin-right: 20px;
        }

        #show_right {
            position: relative;
            float: right;
            margin-right: 150px;
            margin-bottom: 20px;
        }

    </style>
</head>

<body>
<div class="bg">
    <div>
        <button type="button" class="layui-btn" id="back_btn" onclick="location.href='../index.html'">
            返回
        </button>
    </div>
    <fieldset class="layui-elem-field layui-field-title" style="margin-top: 30px;">
        <legend>单选题</legend>
    </fieldset>
    <div style="margin-left: 30px" id="single_box">

    </div>
    <fieldset class="layui-elem-field layui-field-title" style="margin-top: 30px;">
        <legend>多选题</legend>
    </fieldset>
    <div style="margin-left: 30px" id="multiple_box">

    </div>
    <div>
        <button type="button" class="layui-btn" id="show_right" onclick="showRight()">
            查看正确答案
        </button>
    </div>
</div>


<script type="text/javascript" src="../layui/layui.js"></script>
<!--<script type="text/javascript" src="../formSelectV4/formSelects-v4.js"></script>-->
<script type="text/javascript" src="../js/libs/jquery-2.1.1.min.js"></script>
<script type="text/javascript" src="../js/jq.js"></script>
<script type="text/javascript">

    window.onload = function () {
        /**定义ajax的公共部分添加加载中==========================================  */
        $.ajaxSetup({
            beforeSend: function () {
                loading();
            },
            complete: function () {
                loaded();
            }

        });
        loadSingle();
        loadMultiple();
    }

    function showRight() {
        $(".right_answer").show();
    }

    function loadSingle() {

        $.ajax({
            type: 'get',
            url: '/subject/getAll?type=1',
            success: function (data) {
                if (data && data.success) {
                    var subjects = data.subjects;
                    for (var i = 0; i < subjects.length; i++) {
                        var subject = subjects[i];
                        var single_ul = "";
                        single_ul += "<ul value=1 class='single_sub'>";
                        if (subject.sharedQuestion) {
                            single_ul += "<p class='shared_question'>共享题干题:" + subject.sharedQuestion + "</p>";
                        }
                        single_ul += " <span sort = '" + subject.sort + "'>" + subject.sort + "." + subject.subjectContent + "</span>";
                        single_ul += "<span style='color: brown' class='right_answer' hidden>正确答案:" + subject.rightAnswer + "</span>";

                        var options = subject.options;
                        for (var j = 0; j < options.length; j++) {
                            single_ul += "<li class='sing_sub_opt' opt='" + options[j].code + "'>";
                            single_ul += "<input type='checkbox'/>";
                            single_ul += "<span>" + options[j].code + options[j].optionContent + "</span>";
                            single_ul += "</li>";
                        }
                        single_ul += "</ul>";
                        $("#single_box").append(single_ul);
                    }

                }
            }
        });
    }

    function loadMultiple() {

        $.ajax({
            type: 'get',
            url: '/subject/getAll?type=2',
            success: function (data) {
                if (data && data.success) {
                    var subjects = data.subjects;
                    for (var i = 0; i < subjects.length; i++) {
                        var subject = subjects[i];
                        var multiple_ul = "";
                        multiple_ul += "<ul value=1 class='multiple_sub'>";
                        if (subject.sharedQuestion) {
                            multiple_ul += "<p class='shared_question'>共享题干题:" + subject.sharedQuestion + "</p>";
                        }
                        multiple_ul += " <span sort = '" + subject.sort + "'>" + subject.sort + "." + subject.subjectContent + "</span>";
                        multiple_ul += "<span style='color: brown' class='right_answer' hidden>正确答案:" + subject.rightAnswer + "</span>";
                        var options = subject.options;
                        for (var j = 0; j < options.length; j++) {
                            multiple_ul += "<li class='multiple_sub_opt' opt='" + options[j].code + "'>";
                            multiple_ul += "<input type='checkbox'/>";
                            multiple_ul += "<span>" + options[j].code + options[j].optionContent + "</span>";
                            multiple_ul += "</li>";
                        }
                        multiple_ul += "</ul>";
                        $("#multiple_box").append(multiple_ul);
                    }

                }
            }
        });
    }

    layui.config({}).extend({
        formSelects: '../formSelectV4/formSelects-v4'
    });
    var layer;
    var isLoading;
    layui.use(['upload', 'layer', 'formSelects', 'element'], function () {
        layer = layui.layer;
        var upload = layui.upload;
        var element = layui.element;
        var formSelects = layui.formSelects;

    });


    function loading() {
        isLoading = layer.load(0/*loading的图形0,1,2三种*/, {
            shade: true,//遮罩层
            time: 2000 * 1000//关闭时间,没有则按照默认值,最后设置超长,后面手动关闭
        });
    }

    function loaded() {
        layer.close(isLoading);
    }
</script>
</div>
</body>

</html>